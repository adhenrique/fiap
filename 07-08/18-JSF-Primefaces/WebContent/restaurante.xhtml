<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
	xmlns:h="http://xmlns.jcp.org/jsf/html"
	xmlns:f="http://xmlns.jcp.org/jsf/core"
	xmlns:p="http://primefaces.org/ui">

<ui:composition template="_template.xhtml">
	<ui:define name="titulo">
	    Cadastro de Restaurante
	</ui:define>
	<ui:define name="conteudo">
	    
	    <h2>Cadastro de Restaurante</h2>
	    
	    <h:form>
	    	<p:messages id="erros" />
	    	<p:growl/>
	    	<h:panelGrid columns="2">
	    		<p:outputLabel value="Nome" for="nome"/>
	    		<p:inputText required="true" id="nome"
	    			value="#{restauranteBean.restaurante.nome}">
	    			<p:ajax update="erros" />
    			</p:inputText>
	    			
	    		<p:outputLabel value="CEP" for="cep"/>
	    		<p:inputMask mask="99999-999" id="cep"
	    			value="#{restauranteBean.restaurante.cep}"/>
	    		
	    		<p:outputLabel value="Qualificacao" for="qua"/>
	    		<p:rating id="qua"
	    			value="#{restauranteBean.restaurante.qualificacao}"/>
	    		
	    		<p:outputLabel value="Data abertura" for="data"/>
	    		<p:calendar id="data"
	    			value="#{restauranteBean.restaurante.dataAbertura.time}"/>
	    			
	    		<h:commandButton value="Cadastrar"
	    						action="#{restauranteBean.cadastrar}"/>	
	    	</h:panelGrid>
	    </h:form>
	    <h:form>
	    	<p:outputLabel value="Pesquisa" for="nome" />
	    	<p:autoComplete id="nome" value="#{restauranteBean.nomeBusca}" completeMethod="#{restauranteBean.completaNomeRestaurante}" />
	    	<p:commandButton update="tabela" value="Buscar" action="#{restauranteBean.buscar()}" />
	    </h:form>
	    <p:dataTable id="tabela" value="#{restauranteBean.lista}" var="restaurante" rows="10"
                 paginator="true"
                 paginatorTemplate="{CurrentPageReport} {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
                 rowsPerPageTemplate="5,10,15">
	    	<p:column headerText="Nome">
	    		#{restaurante.nome}
	    	</p:column>
	    	<p:column headerText="CEP">
	    		#{restaurante.cep}
	    	</p:column>
	    	<p:column headerText="QualificaÃ§Ã£o">
	    		<p:rating value="#{restaurante.qualificacao}" readonly="true" />
	    	</p:column>
	    	<p:column headerText="Data de abertura">
	    		<h:outputText value="#{restaurante.dataAbertura.time}">
	    			<f:convertDateTime pattern="dd/MM/yyyy" />
	    		</h:outputText>
	    	</p:column>
	    </p:dataTable>
	</ui:define>
</ui:composition>
</html>


